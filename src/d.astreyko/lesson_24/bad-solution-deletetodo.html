<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
  <style>

    .item {
      display: inline-block;
      width: 200px;
    }
  </style>
  <style>

    html, body {
      margin: 0;
    }

    .dialog-container {
      position: fixed;
      width: 100%;
      height: 100vh;
      top: 0;
      background: rgba(0, 0, 0, 0.4);
      display: none;
      align-items: center;
      justify-content: center;
    }

    .dialog-container.shown {
      display: flex;
      animation: opacity 0.5s ease;
    }

    .dialog {
      width: 500px;
      background: white;
      border-radius: 4px;
    }

    .dialog-content {
      height: 150px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
    }

    .close-button {
      position: absolute;
      right: 8px;
      top: 8px;
    }

    @keyframes opacity {
      0% {
        opacity: 0;
      }
      100% {
        opacity: 1;
      }
    }

  </style>
</head>
<body>
<div>
  <form onsubmit="event.preventDefault();addItem()">
    <input id="newItemInput" required>
    <button type="submit">Add</button>
  </form>

</div>
<ol id="itemsContainer">

</ol>


<div id="confirmDialog" class="dialog-container dialog-background">
  <div class="dialog">
    <div class="dialog-content">
      Вы уверены что хотите удалить??
      <button onclick="closeDialog()" class="close-button">X</button>
    </div>
    <div class="dialog-actions">
      <button onclick="confirmDelete()">Yes</button>
      <button onclick="closeDialog()">No</button>
    </div>
  </div>
</div>
<script>
  const newItemInputElement = document.getElementById('newItemInput');
  const itemsContainerElement = document.getElementById('itemsContainer');
  const confirmDialog = document.querySelector('#confirmDialog');

  const ITEMS_KEY = 'items';
  const items = JSON.parse(localStorage.getItem(ITEMS_KEY)) || [];
  render();



  function onContainerClick(event) {
    console.log(event.target);
    if(event.target.dataset.index) {
      openDeleteConfirmModal(+event.target.dataset.index);
      // deleteItem(+event.target.dataset.index)
    }
  }

  itemsContainerElement.addEventListener('click', onContainerClick)

  function addItem() {
    items.push(newItemInputElement.value);
    newItemInputElement.value = '';
    render();
    localStorage.setItem(ITEMS_KEY, JSON.stringify(items));
  }

  function render() {
    let html = '';
    for (let i = 0; i < items.length; i++) {
      const item = items[i];
      html += `<li>
                        <span class="item">${item}</span>
                        <button data-index="${i}">delete</button>
                    </li>`
    }
    itemsContainerElement.innerHTML = html;
  }

  function deleteItem(indexToDelete) {
    items.splice(indexToDelete, 1)
    localStorage.setItem(ITEMS_KEY, JSON.stringify(items));
    render();
  }

  let itemIndexToDelete;

  function openDeleteConfirmModal(indexToDelete) {
    itemIndexToDelete = indexToDelete;
    confirmDialog.classList.add('shown');
  }

  function confirmDelete() {
    deleteItem(itemIndexToDelete)
    closeDialog();
  }

  function closeDialog() {
    confirmDialog.classList.remove('shown');
    itemIndexToDelete = null;
  }
</script>
</body>
</html>